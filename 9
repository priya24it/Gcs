Write-Host "=== Checking gcloud & Python SSL trust ===" -ForegroundColor Cyan; `
gcloud info --format="value(config.custom_ca_certs_file, config.account, config.project)" | ForEach-Object { Write-Host "`n[gcloud config]`nCA file: $($_.Split()[0])`nAccount: $($_.Split()[1])`nProject: $($_.Split()[2])" -ForegroundColor Green }; `
try { python - <<'PY'
import requests, os
print("\n[Python SSL test]")
print("REQUESTS_CA_BUNDLE =", os.environ.get("REQUESTS_CA_BUNDLE"))
print("SSL_CERT_FILE      =", os.environ.get("SSL_CERT_FILE"))
r = requests.get("https://hub.getdbt.com/api/v1/index.json")
print("HTTPS request succeeded with status:", r.status_code)
PY
} catch { Write-Host "Python not found or failed to run" -ForegroundColor Red }
